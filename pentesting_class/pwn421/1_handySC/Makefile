user:
	@echo "Ensuring there is a 'ctf' user with the password 'ctf'"
	getent passwd ctf || sudo useradd ctf && echo “ctf:ctf” | sudo chpasswd

disown:
	@echo Changing ownership of the flag and program
	@echo We will now REQUIRE an exploit to see the flag ...
	sudo chown ctf:ctf flag.txt vuln

setgid:
	@echo "Setting the Group ID of the process to that of the owner (dangerous) ..."
	sudo chmod g+s vuln

compile:
	@echo Compiling C code for execve.  Generating execve.exe ...
	gcc execve32.c -o execve32.exe

shellcode:
	@echo Generating raw shellcode from our execve source ...
	gcc -c execve32.c -o execve32c.o
	objcopy -O binary execve32c.o execve32c.bin

no_null:
	@echo "Generating string-compatible shellcode (No Null Bytes) ..."
	nasm -fbin execve32.s -o execve32.bin

clean:
	@echo Removing build files ...
	rm -f *.o *.bin *.exe
